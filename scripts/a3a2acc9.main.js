"use strict";var AR=window.AR=window.AR||{};AR.fullProfileFields=["first-name","last-name","email-address","summary","specialties","location","picture-url","public-profile-url","last-modified-timestamp","proposal-comments","associations","interests","publications","patents","languages","skills","certifications","educations","courses","volunteer","three-current-positions","three-past-positions","num-recommenders","recommendations-received","date-of-birth","member-url-resources","related-profile-views","honors-awards","phone-numbers","bound-account-types","im-accounts","main-address","twitter-accounts","primary-twitter-account"],AR.renderDate=function(a){if(a.month){var b=["January","February","March","April","May","June","July","August","September","October","November","December"];return b[a.month-1]+" "+a.year}return a.year},AR.getPhone=function(a){if(!a||a.length<1)return"Provide upon request";for(var b=["mobile","work","home"],c=0;c<a.length;c++){var d=a[c];d.index=b.indexOf(d.type)}return a.sort(function(a,b){return a.index-b.index})[0].phoneNumber},AR.LatexText=function(a){function b(a){var d,g,h=!1,i=a;return e.forEach(function(j,k){h||(d=a.search(f[k]),g=a.match(f[k]),-1!==d&&(i=b(a.slice(0,d))+c[e[k]]+b(a.slice(d+g.length)),h=!0))}),i}if(!a)return"TBD";var c={"\n":"\\\\","{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"},d=function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},e=Object.keys(c),f=e.map(function(a){return d(a)});return b(a)};var AR=window.AR=window.AR||{};AR.templates=[{id:"two-column",preview:"/templates/two-column/preview.jpg",src:"/templates/two-column/resume.tex",type:"LaTeX",author:{name:"LaTeXTemplates",url:"http://www.latextemplates.com/"}},{id:"light-blue",preview:"/templates/light-blue/preview.png",src:"/templates/light-blue/resume.html",type:"HTML",author:{name:"Xing Wu",url:"http://xingwu.me/"}}];var AR=window.AR=window.AR||{};AR.onLinkedInLoad=function(){IN.Event.on(IN,"auth",AR.onLinkedInAuth)},doT.templateSettings.strip=!1,ZeroClipboard.config({swfPath:"/bower_components/zeroclipboard/dist/ZeroClipboard.swf"}),AR.onLinkedInAuth=function(){$("#msg").html(""),IN.API.Profile("me").fields(AR.fullProfileFields).result(function(a){AR.profile=a.values[0],$("#btn-generate").click(function(){$("#msg").html(""),$("#rst-list").hide();var a=$(".carousel-inner > .item.active > input").val(),b=$(".carousel-inner > .item.active span.tmpl-type").html();$.ajax({url:a,success:function(a){var c=doT.template(a);AR.resumeStr=c(AR.profile),AR.resumeBlob=new Blob([AR.resumeStr],{type:"text/plain;charset=utf-8"});var d=doT.template($("#rst-tmpl").html());$("#rst-list").html(d(b)),$("#rst-list").show(),AR.bindZclip()},error:function(a,b,c){$("#msg").html(c)}})})})},AR.bindZclip=function(){AR.zclipClients&&ZeroClipboard.destroy(),AR.zclipClients=new ZeroClipboard($(".btn-copy")),AR.zclipClients.on("ready",function(){AR.zclipClients.on("beforecopy",function(){}),AR.zclipClients.on("copy",function(a){a.clipboardData.setData("text/plain",AR.resumeStr)}),AR.zclipClients.on("aftercopy",function(a){$(a.target).children("span").removeClass("hide").show()}),AR.zclipClients.on("error",function(a){console.log(a)})})},$(function(){var a=doT.template($("#item-tmpl").html());$("#carousel-tmpl div.carousel-inner").html(a(AR.templates)),$("#carousel-tmpl").carousel({interval:!1}),$("#btn-generate").click(function(){$("#msg").html("Please login to LinkedIn first.")}),$(".btn-copy").on("click",function(){$(this).children("span").hide()}),document.addEventListener("keydown",function(a){var b=a.keyCode||a.which;73===b&&console.log(AR.profile)})});